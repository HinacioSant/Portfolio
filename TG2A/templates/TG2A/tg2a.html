{% extends "TG2A/base.html" %}

{% block title %}TG2A{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<style>
  body{
    background-color:black
  }

  #gallery_content {
     /* Prevent vertical gaps */
     width:98%;
     margin-left:auto;
     margin-right:auto;
     line-height: 0;


     -webkit-column-count: 3;
     -webkit-column-gap:   2px;
     -moz-column-count:    3;
     -moz-column-gap:      2px;
     column-count:         3;
     column-gap:           2px;
  }

  #gallery_content img {
    /* Just in case there are inline attributes */
    padding:2px;
    width: 100% !important;
    height: auto !important;



  }

  #center {
    display:none;
    width:40%;
    position:fixed;
    right:25%;
    left:25%;
    bottom:47%;
    margin:auto;
  }

  #add_image {
    display:none;
    width:40%;
    position:fixed;
    right:25%;
    left:25%;
    bottom:40%;
    margin:auto;

  }

  #add_image2 {
    display:none;
    width:50%;
    height:42%;
    position:fixed;
    right:10%;
    left:10%;
    bottom:34%;
    margin:auto;
    background-color:red;
    border: 2px solid black;

  }

  #b_style {
    background-color: transparent;
    border: black;


  }

  #b_style :hover{
    color:blue;

  }

  .blur {
  width:100%;
  height:100%;
  pointer-events: none;
  background-size:cover;
  -webkit-filter: blur(2px);
  -moz-filter: blur(2px);
  -ms-filter: blur(2px);
  -o-filter: blur(2px);
  filter: blur(2px);
  }


  @media (max-width: 1200px) {
    #gallery_content {
    -moz-column-count:    2;
    -webkit-column-count: 2;
    column-count:         2;
    }
  }

  @media (max-width: 700px) {
    #gallery_content {
    -moz-column-count:    1;
    -webkit-column-count: 1;
    column-count:         1;
    }
  }


</style>

<div style="color:white" id="page_content">
<h1>TG2A</h1>
<div id="gallery_content">
{% for image in gallery_content %}
<div id="test">
  <a id="image_link" href="gallery/{{image.id}}">
    <img id="images" class="rounded d-block" src="{{image.get_thumbnail}}">
  </a>
</div>
{% endfor %}
<br>
<br>
<br>
</div>
<button type="button" class="btn btn-dark" onclick="add_form()">Add</button>
</div>



<div id="add_image2">
<button style="position:absolute; right:0" id="b_style" onclick="add_form()"><i class="material-icons">close</i></button>
</div>
<div id="add_image">
  <form action="/TG2A/add" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <h4>User: {{request.user}}</h4>
    {{ form.as_p }}
    {{ form.media }}
    <button type="submit" class="btn btn-secondary">Submit</button>
  </form>

</div>

{% endblock %}
{% block javascript %}
<script>
$(document).ready(function(){

  $("div[id^='test']").each(function(){
    $(this).hover(function() {
      $(this).css("margin","0.5px")
      $(this).css("opacity","0.9")


    },
      function() {
        $(this).css("margin","0")
        $(this).css("opacity","1.0")


      })
  })



})

function add_form() {
  if ($("#add_image").is(":hidden")){
    $("#add_image").show()
    $("#add_image2").show()

    $("#page_content").addClass("blur")
  }


  else {
    $("#add_image").hide()
    $("#add_image2").hide()

    $("#page_content").removeClass("blur")

}
}



</script>


{% endblock %}
